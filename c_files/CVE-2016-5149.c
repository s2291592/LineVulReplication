  ServiceProcessControlBrowserTest() {
   }

static void DecrementUntilZero(int* count) {
  (*count)--;
  if (!(*count))
    base::ThreadTaskRunnerHandle::Get()->PostTask(
        FROM_HERE, base::RunLoop::QuitCurrentWhenIdleClosureDeprecated());
}

void ProcessControlLaunchFailed() {
ADD_FAILURE();
    // Quit the current message.
    base::ThreadTaskRunnerHandle::Get()->PostTask(
        FROM_HERE, base::RunLoop::QuitCurrentWhenIdleClosureDeprecated());
}

void HistogramsCallback() {
MockHistogramsCallback();
    QuitMessageLoop();
}

   void Disconnect() {
    ServiceProcessControl::GetInstance()->Disconnect();
  }

void LaunchServiceProcessControl(bool wait) {
// Launch the process asynchronously.
ServiceProcessControl::GetInstance()->Launch(
        base::Bind(&ServiceProcessControlBrowserTest::ProcessControlLaunched,
                   base::Unretained(this)),
        base::Bind(
&ServiceProcessControlBrowserTest::ProcessControlLaunchFailed,
            base::Unretained(this)));
    // Then run the message loop to keep things running.
    if (wait)
      content::RunMessageLoop();
  }
